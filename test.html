<html>
<button id="run">Run</button>
<script type="module">
  import { FatFs } from "./fs/fat_fs.js"
  import { NativeFs } from "./fs/native_fs.js"
  import { XdfImage } from "./image/xdf_image.js"
  import { NativeIO } from "./io/native_io.js"

  const io = new NativeIO();
  document.getElementById('run').addEventListener('click', async e => {
    await io.choose();
    const xdf = new XdfImage();
    await xdf.open(io);
    const fat = new FatFs();
    await fat.open(xdf);
    await fat.list(entry => {
      console.log(entry);
    });
  });

  /*
  const nfs = new NativeFs();
  document.getElementById('run').addEventListener('click', async e => {
    await nfs.choose();
    await nfs.list(entry => {
      console.log(entry);
    });
  });
  */
</script>

</html>